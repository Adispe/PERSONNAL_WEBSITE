{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/app.service\";\nimport * as i2 from \"../../services/game.service\";\nconst _c0 = [\"canvas\"];\nexport let GameComponent = /*#__PURE__*/(() => {\n  class GameComponent {\n    constructor(appService, gameService) {\n      this.appService = appService;\n      this.gameService = gameService;\n      this.showLoader = true;\n      this.score = setInterval(() => {\n        this.score = this.gameService.score;\n        return this.score;\n      }, 100);\n    }\n\n    ngAfterViewInit() {\n      const canvasEl = this.canvas.nativeElement; //Ajout d'un joueur par nickname\n\n      this.gameService.addPlayer(); //Initialisation de l'affichage\n\n      this.appService.createPlayGround(canvasEl); //Sequence de lancement du jeu\n\n      this.subscription = this.appService.getImageLoadEmitter().subscribe(item => {\n        this.showLoader = false;\n        this.gameService.startGameLoop();\n      });\n    } // Detection touche enfoncée\n\n\n    onKeydownHandler(event) {\n      this.appService.movePlayer(event, 'keydown');\n    } //Detection touche relevée\n\n\n    onKeyupHandler(event) {\n      this.appService.movePlayer(event, 'keyup');\n    }\n\n  }\n\n  GameComponent.ɵfac = function GameComponent_Factory(t) {\n    return new (t || GameComponent)(i0.ɵɵdirectiveInject(i1.AppService), i0.ɵɵdirectiveInject(i2.GameService));\n  };\n\n  GameComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GameComponent,\n    selectors: [[\"app-game\"]],\n    viewQuery: function GameComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      }\n    },\n    hostBindings: function GameComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown\", function GameComponent_keydown_HostBindingHandler($event) {\n          return ctx.onKeydownHandler($event);\n        }, false, i0.ɵɵresolveDocument)(\"keyup\", function GameComponent_keyup_HostBindingHandler($event) {\n          return ctx.onKeyupHandler($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 9,\n    vars: 2,\n    consts: [[1, \"loader\", 3, \"hidden\"], [1, \"message\"], [1, \"fas\", \"fa-spinner\", \"fa-spin\"], [1, \"play-ground\"], [\"canvas\", \"\"], [2, \"color\", \"white\"]],\n    template: function GameComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"i\", 2);\n        i0.ɵɵelementStart(3, \"h2\");\n        i0.ɵɵtext(4, \"Loading\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"canvas\", 3, 4);\n        i0.ɵɵelementStart(7, \"h1\", 5);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"hidden\", !ctx.showLoader);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\"Score : \", ctx.score, \"\");\n      }\n    },\n    styles: [\".instructions[_ngcontent-%COMP%]{position:absolute;margin:0;top:0;width:154px;padding:5px;color:#fff;background:#000;font-weight:700;text-align:justify}.loader[_ngcontent-%COMP%]{width:100%;height:100%;background:#424242;position:absolute;text-align:center;color:#fff}.message[_ngcontent-%COMP%]{text-align:center;margin-top:20%}.loader[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.play-ground[_ngcontent-%COMP%]{display:grid;margin:auto;background-color:#87ceeb}\"]\n  });\n  return GameComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}