{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/app.service\";\nimport * as i2 from \"../../services/game.service\";\nconst _c0 = [\"canvas\"]; // import {ChangeDetectorRef} from '@angular/core';\n\nexport let GameComponent = /*#__PURE__*/(() => {\n  class GameComponent {\n    constructor(appService, gameService) {\n      this.appService = appService;\n      this.gameService = gameService;\n      this.showLoader = true;\n      this.nickname = \"\";\n      this.score = setInterval(() => {\n        this.score = this.gameService.score;\n        return this.score;\n      }, 100);\n    }\n\n    ngAfterViewInit() {\n      const canvasEl = this.canvas.nativeElement; //Initialisation de l'affichage\n\n      this.appService.createPlayGround(canvasEl); //Sequence de lancement du jeu\n\n      this.subscription = this.appService.getImageLoadEmitter().subscribe(item => {\n        this.showLoader = false;\n        this.gameService.startGameLoop();\n      });\n    } // Detection touche enfoncée\n\n\n    onKeydownHandler(event) {\n      this.appService.movePlayer(event, 'keydown');\n    } //Detection touche relevée\n\n\n    onKeyupHandler(event) {\n      this.appService.movePlayer(event, 'keyup');\n    }\n\n  }\n\n  GameComponent.ɵfac = function GameComponent_Factory(t) {\n    return new (t || GameComponent)(i0.ɵɵdirectiveInject(i1.AppService), i0.ɵɵdirectiveInject(i2.GameService));\n  };\n\n  GameComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GameComponent,\n    selectors: [[\"app-game\"]],\n    viewQuery: function GameComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      }\n    },\n    hostBindings: function GameComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown\", function GameComponent_keydown_HostBindingHandler($event) {\n          return ctx.onKeydownHandler($event);\n        }, false, i0.ɵɵresolveDocument)(\"keyup\", function GameComponent_keyup_HostBindingHandler($event) {\n          return ctx.onKeyupHandler($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 8,\n    vars: 2,\n    consts: [[1, \"loader\", 3, \"hidden\"], [1, \"message\"], [1, \"play-ground\"], [\"canvas\", \"\"], [2, \"color\", \"white\"]],\n    template: function GameComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h2\");\n        i0.ɵɵtext(3, \"Loading\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"canvas\", 2, 3);\n        i0.ɵɵelementStart(6, \"h1\", 4);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"hidden\", !ctx.showLoader);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\"Score : \", ctx.score, \"\");\n      }\n    },\n    styles: [\".instructions[_ngcontent-%COMP%]{position:absolute;margin:0;top:0;width:154px;padding:5px;color:#fff;background:#000;font-weight:700;text-align:justify}.loader[_ngcontent-%COMP%]{width:100%;height:100%;background:#2F3940;position:absolute;text-align:center;color:#fff}.message[_ngcontent-%COMP%]{text-align:center;margin-top:20%}.loader[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.play-ground[_ngcontent-%COMP%]{display:grid;margin:auto;background-color:#87ceeb}.menu-bouton[_ngcontent-%COMP%]{width:200px;text-align:left;margin:5px auto}@media (max-width: 500px){.menu-bouton[_ngcontent-%COMP%]{width:200px;text-align:left}}.game[_ngcontent-%COMP%]{display:block}@media (max-width: 1000px){.game[_ngcontent-%COMP%]{display:none}}.portfolio-experiment[_ngcontent-%COMP%]{background:#2F3940}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;padding:.7em .84em;display:inline-block;border:3px solid transparent;position:relative;font-size:1.5em;cursor:pointer;letter-spacing:.07em}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-family:proxima-nova,monospace;transform:translateY(.7em);display:block;transition:transform .4s cubic-bezier(.2,0,0,1) .4s;font-weight:700}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{position:absolute;content:\\\"\\\";bottom:-3px;left:.84em;right:.84em;height:3px;background:skyblue;transition:transform .8s cubic-bezier(1,0,.37,1) .2s,right .2s cubic-bezier(.04,.48,0,1) .6s,left .4s cubic-bezier(.04,.48,0,1) .6s;transform-origin:left}.portfolio-experiment[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{position:absolute;background:skyblue}.portfolio-experiment[_ngcontent-%COMP%]   .line.-right[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   .line.-left[_ngcontent-%COMP%]{width:3px;bottom:-3px;top:-3px;transform:scaleY(0)}.portfolio-experiment[_ngcontent-%COMP%]   .line.-top[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   .line.-bottom[_ngcontent-%COMP%]{height:3px;left:-3px;right:-3px;transform:scaleX(0)}.portfolio-experiment[_ngcontent-%COMP%]   .line.-right[_ngcontent-%COMP%]{right:-3px;transition:transform .1s cubic-bezier(1,0,.65,1.01) .23s;transform-origin:top}.portfolio-experiment[_ngcontent-%COMP%]   .line.-top[_ngcontent-%COMP%]{top:-3px;transition:transform .08s linear .43s;transform-origin:left}.portfolio-experiment[_ngcontent-%COMP%]   .line.-left[_ngcontent-%COMP%]{left:-3px;transition:transform .08s linear .51s;transform-origin:bottom}.portfolio-experiment[_ngcontent-%COMP%]   .line.-bottom[_ngcontent-%COMP%]{bottom:-3px;transition:transform .3s cubic-bezier(1,0,.65,1.01);transform-origin:right}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active   .text[_ngcontent-%COMP%]{transform:translate(0);transition:transform .6s cubic-bezier(.2,0,0,1) .4s}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after, .portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active:after{transform:scaleX(0);right:-3px;left:-3px;transform-origin:right;transition:transform .2s cubic-bezier(1,0,.65,1.01) .17s,right .2s cubic-bezier(1,0,.65,1.01),left 0s .3s}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .line[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active   .line[_ngcontent-%COMP%]{transform:scale(1)}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .line.-right[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active   .line.-right[_ngcontent-%COMP%]{transition:transform .1s cubic-bezier(1,0,.65,1.01) .2s;transform-origin:bottom}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .line.-top[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active   .line.-top[_ngcontent-%COMP%]{transition:transform .08s linear .4s;transform-origin:right}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .line.-left[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active   .line.-left[_ngcontent-%COMP%]{transition:transform .08s linear .48s;transform-origin:top}.portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .line.-bottom[_ngcontent-%COMP%], .portfolio-experiment[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active   .line.-bottom[_ngcontent-%COMP%]{transition:transform .5s cubic-bezier(0,.53,.29,1) .56s;transform-origin:left}\"]\n  });\n  return GameComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}